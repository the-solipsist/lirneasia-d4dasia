# Data for Development: Asia

**Investigating data governance policies and practices in South and Southeast Asia.**

This project is undertaken by [LIRNEasia](https://lirneasia.net "null") and funded by [IDRC](https://idrc-cdri.ca "null"). The repository contains the source code and text required to generate reports for seven focus countriesâ€”India, Indonesia, Nepal, Pakistan, Philippines, Sri Lanka, and Thailandâ€”as well as a smaller report on data protection from South Korea.

## ðŸ“‚ Project Structure

This project uses [Quarto](https://quarto.org "null") and [Typst](https://typst.app/ "null"). The files are organized to separate content, logic, and build outputs.

### Directory Layout

* **`_quarto.yml`**: Project-level configuration.

* **`shared/`**:

  * `d4dasia-bib.json`: Master bibliography (CSL JSON format).

  * `*.csl`: Citation Style Language files.

* **`reports/`**: The local output directory. **Note:** This folder is ignored by git (`.gitignore`). It is populated only when you run `quarto render` locally.

* **`_scripts/`**: Helper scripts for the build process (`link-pdfs.sh`).

* **`_extensions/lirneasia/`**:

  * Contains the Typst template (`typst-template.typ`) and `brand.yml` for LIRNEasia house style.

* **`country/`**: Source files for individual country reports.

  * `in/` (India), `id/` (Indonesia), `np/` (Nepal), `pk/` (Pakistan), `sl/` (Sri Lanka), `th/` (Thailand), `kr/` (South Korea).

### Country Directory Format

Each country folder (e.g., `country/sl/`) follows this standard structure:

* **Report Source:** `d4dasia_country-report_{xx}.qmd` (where `{xx}` is the country code).

* **Metadata:** `_metadata.yml` (Country-specific settings).

* **Assets:** `images/` folder containing local diagrams and photos.

* **Local Bibliography:** `d4dasia-bib-{xx}.json` (Optional, for country-specific citations).

## ðŸ› ï¸ Prerequisites & Setup

To replicate this project locally, ensure you have the following installed:

* **Git** (or Jujutsu)

* [**Quarto CLI**](https://quarto.org/docs/get-started/ "null") (v1.4+)

* **Visual Studio Code** (Recommended, with the Quarto Extension)

### 1. Clone the Repository

```
git clone git@github.com:the-solipsist/lirneasia-d4dasia.git d4dasia
cd d4dasia
```

### 2. Fonts (Important!)

To keep this repository lightweight, the font files (Sorts Mill Goudy, Montserrat, Sarabun, etc.) are **not included** in this repository. They are managed in a separate external repository to handle large binary files efficiently.

* **For CI/CD (GitHub Actions):** The workflow automatically checks out the font repository (`the-solipsist/fonts`) alongside the main code and installs them into the runner's system environment.

* **For Local Development:** You must ensure the required fonts are installed on your system.

  * **Latin:** [Sorts Mill Goudy](https://fonts.google.com/specimen/Sorts+Mill+Goudy "null"), [Montserrat](https://fonts.google.com/specimen/Montserrat "null").

  * **Thai:** [Sarabun](https://fonts.google.com/specimen/Sarabun "null").

  * _Note: `brand.yml` is configured to fetch these from Google Fonts automatically if you use a Quarto version that supports full brand management, but system installation is strongly recommended for Typst stability._

### 3. Render the Reports

To generate the PDFs locally, run the following command. The outputs will be placed in the `reports/` directory.

**To render the entire project:**

```
quarto render
```

**To render a specific country report (e.g., Sri Lanka):**

```
quarto render country/sl/d4dasia_country-report_sl.qmd
```

### 4. Organize Outputs (Optional)

To create hard links inside the `reports/` folder pointing to the generated PDFs in `country/` folders, run the helper script (this runs automatically in CI):

```
./_scripts/link-pdfs.sh
```

## ðŸ“š Bibliography Management

1\. Master Bibliography (shared/d4dasia-bib.json)

The main citation data is stored in the shared/ directory. This file is automatically generated by Zotero (using BetterBibTex CSL JSON export).

> **Warning:** Do not edit the master JSON file manually. Changes will be overwritten during the next Zotero export.

2\. Country-Specific Bibliographies

Some reports (e.g., Sri Lanka) require specialized citations not found in the master list. These are stored within the country directory (e.g., country/sl/d4dasia-bib-sl.json) and merged via the country's \_metadata.yml file.

## ðŸ¤– CI/CD (GitHub Actions)

This repository uses GitHub Actions to automatically render PDFs on every push.

* **Triggers:** Pushes to `main` and any branch starting with `test` (e.g., `test`, `test-fonts`).

* **Accessing Reports:** Generated PDFs are **not committed** to the repository to prevent bloat. Instead, they are available as **Artifacts**.

  1. Go to the **Actions** tab on GitHub.

  2. Click on the latest workflow run.

  3. Scroll down to the **Artifacts** section.

  4. Download the `d4dasia-reports` ZIP file.

* **Workflow Steps:**

  1. Check out main code into `main-repo`.

  2. **Check out Fonts:** Clones the external font repository (`the-solipsist/fonts`) into `font-repo`.

  3. **Install Fonts:** Copies fonts from `font-repo` to the Linux runner's system font directory.

  4. Install Quarto.

  5. Render PDF.

  6. **Upload Artifacts:** Collects generated PDFs and uploads them to the Action run page.

## ðŸ“„ License

All report contents in this repository are licensed under the [Creative Commons Attribution 4.0 International License (CC BY 4.0)](https://creativecommons.org/licenses/by/4.0/ "null"). You are free to share and adapt the material, provided you give appropriate credit to LIRNEasia and the respective authors.

